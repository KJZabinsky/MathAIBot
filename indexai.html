<!DOCTYPE html>
<html>
<head>
  <title>MLP-BOT-KJZ-HTML</title>
  <style>
    :root {
      --text-color: white;
      --bg-color: #111;
      --bot-bg-color: #222;
      --user-bg-color: #333;
      --message-height: 30%;
      --button-border-color: #ccc;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: var(--bg-color);
    }

    .chat-container {
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: row;
    }

    .chat-content {
      flex-grow: 1;
      overflow-y: auto;
      padding: 20px;
    }

    .chat-message {
      margin: 10px 0;
      padding: 10px;
      border-radius: 5px;
      color: var(--text-color);
    }

    .user-message {
      text-align: right;
      background-color: var(--user-bg-color);
    }

    .bot-message {
      text-align: left;
      background-color: var(--bot-bg-color);
    }

    .user-message::before,
    .bot-message::before {
      content: "";
      display: inline-block;
      width: 10px;
      height: 10px;
      margin-right: 10px;
      background-color: currentColor;
      border-radius: 50%;
      animation: typing 1s infinite;
    }

    @keyframes typing {
      0% {
        opacity: 0.5;
      }
      50% {
        opacity: 1;
      }
       100% {
        opacity: 0.5;
      }
    }

    .user-input-container {
      width: 300px;
      padding: 20px;
      background-color: var(--user-bg-color);
      display: flex;
      flex-direction: column;
    }

    textarea {
      width: 100%;
      height: var(--message-height);
      resize: none;
      padding: 10px;
      margin-top: 10px;
      border: 1px solid var(--button-border-color);
      border-radius: 4px;
      box-sizing: border-box;
      font-size: 15px;
      color: var(--text-color);
      background-color: var(--user-bg-color);
    }

    button {
      padding: 10px;
      margin-top: 10px;
      background-color: var(--user-bg-color);
      border: 1px solid var(--button-border-color);
      color: var(--text-color);
      border-radius: 4px;
      cursor: pointer;
    }

    button[data-mode="light"] {
      background-color: var(--bot-bg-color);
      color: #fff;
    }

    #letter-count {
      text-align: center;
      color: var(--text-color);
    }

    body.light-mode {
      --text-color: black;
      --bg-color: #eee;
      --bot-bg-color: #ddd;
      --user-bg-color: #ccc;
      --button-border-color: #666;
    }

    body.light-mode .user-input-container {
      background-color: var(--user-bg-color);
    }

    body.light-mode textarea {
      color: var(--text-color);
      background-color: var(--user-bg-color);
      border: 1px solid var(--button-border-color);
    }

    body.light-mode button {
      background-color: var(--user-bg-color);
      color: var(--text-color);
      border: 1px solid var(--button-border-color);
    }

    body.light-mode button[data-mode="light"] {
      background-color: var(--bot-bg-color);
      color: #fff;
    }
  </style>
</head>
<body class="dark-mode">
  <div class="chat-container">
    <div class="chat-content" id="chat-content">
      <p class="chat-message bot-message">Welcome! I'm here to assist you with math-related questions. Feel free to ask me anything!</p>
    </div>
    <div class="user-input-container">
      <button onclick="applyChatSettings()">Apply Settings</button>
      <button onclick="clearChat()">Clear Chat</button>
      <button onclick="saveChatData()">Save Chat</button>
      <button onclick="loadChatData()">Load Chat</button>

      <textarea id="user-input" placeholder="Type your message here..."></textarea>
      <button id="submit-button" onclick="sendMessage()">Send</button>
      <button id="dark-mode-button" data-mode="dark" onclick="toggleDarkMode()">Light Mode</button>
      <div id="letter-count"></div>
    </div>
  </div>

<script>
  const chatContent = document.getElementById('chat-content');
  const userInput = document.getElementById('user-input');
  const letterCount = document.getElementById('letter-count');

  let settings = {};

  function applyChatSettings() {
    const textColor = document.getElementById('text-color').value;
    settings.textColor = textColor;

    chatContent.style.setProperty('--text-color', textColor);
  }

  function clearChat() {
    chatContent.innerHTML = '';
  }

  function saveChatData() {
    const chatData = chatContent.innerHTML;
    localStorage.setItem('chatData', chatData);
  }

  function loadChatData() {
    const chatData = localStorage.getItem('chatData');
    chatContent.innerHTML = chatData;
  }

  function sendMessage() {
    const message = userInput.value.trim();

    if (message !== '') {
      addMessage("Equation: " + message, 'user-message');
      const response = getResponse(message);
      addMessage(response, 'bot-message');
      userInput.value = '';
    }
  }

  function addMessage(message, className) {
    const messageElement = document.createElement('p');
    messageElement.textContent = message;
    messageElement.className = `chat-message ${className}`;
    chatContent.appendChild(messageElement);
    chatContent.scrollTop = chatContent.scrollHeight;
  }

  function getResponse(message) {
    if (/^(?:what is\s+)?[+\-*/\d\s().]+$/.test(message)) {
      const result = evaluateEquation(message);
      return "Result: " + result;
    } else if (message.toLowerCase().includes('hello') || message.toLowerCase().includes('hi')) {
      return "Hello!";
    } else if (message.toLowerCase().includes('thanks') || message.toLowerCase().includes('thank you')) {
      return "You're welcome!";
    } else if (fetchDefinitionFromFile(message)) {
      return fetchDefinitionFromFile(message);
    } else {
      return "I'm sorry, I don't understand. Could you please rephrase your question?";
    }
  }

  function evaluateEquation(equation) {
    try {
      const result = eval(equation);
      return result;
    } catch (error) {
      return "Invalid equation. Please check your input.";
    }
  }

  function containsTerm(message, term) {
    return message.toLowerCase().includes(term.toLowerCase());
  }

  function fetchDefinitionFromFile(word) {
    const definitions = {
      abacus: "An early counting tool used for basic arithmetic.",
      "Absolute Value": "Always a positive number, absolute value refers to the distance of a number from 0.",
      "Acute Angle": "An angle whose measure is between 0° and 90° or with less than 90° or pi/2 radians.",
      addend: "A number involved in an addition problem; numbers being added are called addends.",
      algebra: "The branch of mathematics that substitutes letters for numbers to solve for unknown values.",
      algorithm: "A procedure or set of steps used to solve a mathematical computation.",
      angle: "The figure formed by two rays sharing a common endpoint.",
      "Angle Bisector": "A line or ray that divides an angle into two congruent angles.",
      area: "The measure of the amount of space inside a two-dimensional figure.",
      variable: "A symbol used to represent a quantity that can vary or change in a mathematical expression or equation.",
      coefficient: "A number multiplied by a variable in an algebraic term.",
      congruent: "Having the same size and shape; two figures are congruent if they are identical after translation, rotation, and/or reflection.",
      cylinder: "A three-dimensional geometric shape with two parallel circular bases and a curved surface connecting the bases.",
      decimal: "A number with a decimal point used to represent a part of a whole.",
      diameter: "The distance across a circle passing through the center; it is twice the length of the radius.",
      equation: "A mathematical statement that states two expressions are equal.",
      exponent: "A number that indicates how many times a base number is multiplied by itself.",
      fraction: "A number that represents a part of a whole or a division of quantities.",
      geometry: "The branch of mathematics that deals with the properties, measurements, and relationships of points, lines, angles, and figures in space.",
      hypotenuse: "The side opposite the right angle in a right triangle; it is the longest side.",
      integer: "A whole number that can be positive, negative, or zero."
    };

    return definitions[word];
  }

  function toggleDarkMode() {
    const darkModeButton = document.getElementById('dark-mode-button');
    const currentMode = darkModeButton.dataset.mode;

    if (currentMode === 'dark') {
      document.body.classList.remove('dark-mode');
      darkModeButton.textContent = 'Dark Mode';
      darkModeButton.dataset.mode = 'light';
    } else {
      document.body.classList.add('dark-mode');
      darkModeButton.textContent = 'Light Mode';
      darkModeButton.dataset.mode = 'dark';
    }
  }

  userInput.addEventListener('input', function () {
    const inputLength = userInput.value.length;
    letterCount.textContent = inputLength + "/500";
  });

  userInput.addEventListener('keydown', function (event) {
    if (event.key === 'Enter') {
      event.preventDefault();
      sendMessage();
    }
  });
</script>

</body>
</html>
